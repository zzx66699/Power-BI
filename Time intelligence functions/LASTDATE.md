## 🧩 LASTDATE()

### 📘 语法
```DAX
LASTDATE(<dates>)
```

---

### 📖 说明
- `LASTDATE()` 返回 **当前筛选上下文** 中 `<dates>` 列的**最后一个日期**。  
- 返回值类型是一个 **单列表 (table)**，里面只包含这一个日期。  
- 如果你把它放在一个表达式中使用（例如 `CALCULATE()` 里），  
  通常会被自动转换成该日期的标量值。

---

### ⚙️ 参数
| 参数 | 描述 |
| ---- | ---- |
| `<dates>` | 日期列或返回日期列的表表达式（通常是 `Date[Date]`）。 |

---

### 💡 示例表：`Sales`

| Date | Revenue |
| ---- | -------- |
| 2024-01-01 | 100 |
| 2024-01-02 | 150 |
| 2024-01-03 | 200 |

---

### ✅ 示例 1：获取当前上下文的最后日期
```DAX
LASTDATE(Sales[Date])
```

| 当前筛选上下文 | 返回值 |
| -------------- | -------- |
| 无筛选（全表） | 2024-01-03 |
| 筛选到 2024 年 1 月 | 2024-01-03 |
| 筛选到 2024 年 1 月 1~2 日 | 2024-01-02 |

---

### ✅ 示例 2：配合 `CALCULATE()` 使用
```DAX
Last Day Revenue :=
CALCULATE(
    SUM(Sales[Revenue]),
    LASTDATE(Sales[Date])
)
```

📖 含义：  
计算当前上下文中**最后一天**的销售额。

---

### 📈 示例结果
| Context (Month) | LASTDATE | Last Day Revenue |
| ---------------- | -------- | ---------------- |
| January | 2024-01-03 | 200 |
| February | 2024-02-29 | 300 |
| March | 2024-03-31 | 250 |

---

### 🧠 小结
- `LASTDATE()` → 返回当前上下文中的**最后一个日期**（是表，不是数值）。  
- 常用于：
  - 获取最新日期的度量值；
  - 时间智能函数组合（如计算“上期值”、“最新库存”等）。

---

### ⚠️ 注意
| 函数 | 说明 |
| ---- | ---- |
| `LASTDATE()` | 返回日期表（可自动转为单个日期） |
| `MAX(Date[Date])` | 返回一个标量日期 |
| `LASTNONBLANK()` | 返回最后一个非空值对应的日期 |
| `LASTDATE()` 只能用于**日期类型列**，否则会报错。 |
